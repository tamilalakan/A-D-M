!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/fire"),require("firebase/storage"),require("firebase/app"),require("@firebase/storage")):"function"==typeof define&&define.amd?define("@angular/fire/storage",["exports","rxjs","rxjs/operators","@angular/core","@angular/fire","firebase/storage","firebase/app","@firebase/storage"],r):r(((e="undefined"!=typeof globalThis?globalThis:e||self).angular=e.angular||{},e.angular.fire=e.angular.fire||{},e.angular.fire.storage={}),e.rxjs,e.rxjs.operators,e.ng.core,e.angular.fire,null,e.firebase,e["firebase-storage"])}(this,(function(e,r,t,n,a,o,i,u){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=s(i);function f(e){return new r.Observable((function(r){var t=function(e){return r.next(e)};return e.on("state_changed",t,(function(e){return r.error(e)}),(function(){t(e.snapshot),r.complete()})),function(){return e.cancel()}}))}function l(e){var r=f(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:function(){return r},percentageChanges:function(){return r.pipe(t.map((function(e){return e.bytesTransferred/e.totalBytes*100})))}}}function p(e,n,a){return{getDownloadURL:function(){return r.of(void 0).pipe(t.observeOn(n.outsideAngular),t.switchMap((function(){return e.getDownloadURL()})),a)},getMetadata:function(){return r.of(void 0).pipe(t.observeOn(n.outsideAngular),t.switchMap((function(){return e.getMetadata()})),a)},delete:function(){return r.from(e.delete())},child:function(r){return p(e.child(r),n,a)},updateMetadata:function(t){return r.from(e.updateMetadata(t))},put:function(r,t){return l(e.put(r,t))},putString:function(r,t,n){return l(e.putString(r,t,n))},listAll:function(){return r.from(e.listAll())}}}var d=new n.InjectionToken("angularfire2.storageBucket"),g=function(){function e(e,r,t,n,o){this.schedulers=new a.ɵAngularFireSchedulers(o),this.keepUnstableUntilFirst=a.ɵkeepUnstableUntilFirstFactory(this.schedulers),this.storage=o.runOutsideAngular((function(){var n=a.ɵfirebaseAppFactory(e,o,r);return u.registerStorage&&u.registerStorage(c.default),n.storage(t||void 0)}))}return e.prototype.ref=function(e){return p(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst)},e.prototype.upload=function(e,r,t){return p(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst).put(r,t)},e}();g.decorators=[{type:n.Injectable,args:[{providedIn:"any"}]}],g.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[a.FIREBASE_OPTIONS]}]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[a.FIREBASE_APP_NAME]}]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[d]}]},{type:Object,decorators:[{type:n.Inject,args:[n.PLATFORM_ID]}]},{type:n.NgZone}]},g.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new g(n.ɵɵinject(a.FIREBASE_OPTIONS),n.ɵɵinject(a.FIREBASE_APP_NAME,8),n.ɵɵinject(d,8),n.ɵɵinject(n.PLATFORM_ID),n.ɵɵinject(n.NgZone))},token:g,providedIn:"any"});var b=function(){};b.decorators=[{type:n.NgModule,args:[{providers:[g]}]}],e.AngularFireStorage=g,e.AngularFireStorageModule=b,e.BUCKET=d,e.createStorageRef=p,e.createUploadTask=l,e.fromTask=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-fire-storage.umd.min.js.map